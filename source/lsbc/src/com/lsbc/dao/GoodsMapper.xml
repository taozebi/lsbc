<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.lsbc.dao.GoodsMapper">
	 <select id="findGoodsByPage" resultType="Goods" parameterType="Goods">
		 SELECT 
			 id,
			 goods_name AS goodsName,
			 in_price AS inPrice,
			 out_price AS outPrice,
			 address AS address,
			 factory AS factory,
			 number AS number,
			 unit AS unit,
			 good_type_id AS goodTypeId
		FROM Goods
		WHERE 1=1 
			 <if test="goodsName!=null and goodsName!=''">
			   and goods_name LIKE CONCAT(CONCAT('%', #{goodsName}),'%')
			 </if>
			 <if test="address!=null and address!=''">
			   and address LIKE CONCAT(CONCAT('%', #{address}),'%')
			 </if>
			 <if test="factory!=null and factory!=''">
			   and factory LIKE CONCAT(CONCAT('%', #{factory}),'%')
			 </if>
			 <if test="unit!=null and unit!=''">
			   and unit LIKE CONCAT(CONCAT('%', #{unit}),'%')
			 </if>
		<if test="orderField != null and orderField != ''">
		 order by ${orderField} 
		</if>
		limit #{pageSize} offset #{offset}
	 </select>

	 <select id="findPageCount" resultType="java.lang.Integer" parameterType="Goods">
		 SELECT count(1) FROM Goods
		 WHERE 1=1 
			 <if test="goodsName!=null and goodsName!=''">
			   and goods_name LIKE CONCAT(CONCAT('%', #{goodsName}),'%')
			 </if>
			 <if test="address!=null and address!=''">
			   and address LIKE CONCAT(CONCAT('%', #{address}),'%')
			 </if>
			 <if test="factory!=null and factory!=''">
			   and factory LIKE CONCAT(CONCAT('%', #{factory}),'%')
			 </if>
			 <if test="unit!=null and unit!=''">
			   and unit LIKE CONCAT(CONCAT('%', #{unit}),'%')
			 </if>
	 </select>

	 <insert id="addGoods" parameterType="Goods">
		 INSERT INTO Goods(goods_name,in_price,out_price,address,factory,number,unit,good_type_id)
		 VALUES (#{goodsName},#{inPrice},#{outPrice},#{address},#{factory},#{number},#{unit},#{goodTypeId})
	 </insert>

	 <update id="updateGoods" parameterType="Goods">
		 UPDATE Goods SET goods_name= #{goodsName},in_price= #{inPrice},out_price= #{outPrice},address= #{address},factory= #{factory},number= #{number},unit= #{unit},good_type_id= #{goodTypeId}
		 WHERE id = #{id}
	 </update>

	 <delete id="delGoods" parameterType="Goods">
		 DELETE FROM Goods
		 WHERE 1=1 
			 <if test="goodsName!=null">
			 and goods_name= #{goodsName}
			 </if>
			 <if test="inPrice!=null">
			 and in_price= #{inPrice}
			 </if>
			 <if test="outPrice!=null">
			 and out_price= #{outPrice}
			 </if>
			 <if test="address!=null">
			 and address= #{address}
			 </if>
			 <if test="factory!=null">
			 and factory= #{factory}
			 </if>
			 <if test="number!=null">
			 and number= #{number}
			 </if>
			 <if test="unit!=null">
			 and unit= #{unit}
			 </if>
			 <if test="goodTypeId!=null">
			 and good_type_id= #{goodTypeId}
			 </if>
			 <if test="id!=null">
			 and id= #{id}
			 </if>
	 </delete>

	 <select id="getGoods" resultType="Goods" parameterType="Goods">
		 SELECT 
			 id,
			 goods_name AS goodsName,
			 in_price AS inPrice,
			 out_price AS outPrice,
			 address AS address,
			 factory AS factory,
			 number AS number,
			 unit AS unit,
			 good_type_id AS goodTypeId
		FROM Goods
		WHERE 1=1 
			 <if test="goodsName!=null">
			 and goods_name= #{goodsName}
			 </if>
			 <if test="inPrice!=null">
			 and in_price= #{inPrice}
			 </if>
			 <if test="outPrice!=null">
			 and out_price= #{outPrice}
			 </if>
			 <if test="address!=null">
			 and address= #{address}
			 </if>
			 <if test="factory!=null">
			 and factory= #{factory}
			 </if>
			 <if test="number!=null">
			 and number= #{number}
			 </if>
			 <if test="unit!=null">
			 and unit= #{unit}
			 </if>
			 <if test="goodTypeId!=null">
			 and good_type_id= #{goodTypeId}
			 </if>
			 <if test="id!=null">
			 and id= #{id}
			 </if>
	 </select>

</mapper>

